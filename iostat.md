# iostat
> iostat 用于监控系统输入输出设备(网络适配器即网卡,tty设备(终端设备)，磁盘，CD-ROM等)的io负载情况，iostat首次运行时显示自系统启动开始的各项统计信息，之后运行iostat将显示自上次运行该命令以后的统计信息.在多处理器系统上，CPU 统计信息是系统范围计算的，是所有处理器的平均值。

### 语法
``` shell
iostat [ -c ] [ -d ] [ -h ] [ -N ] [ -k | -m ] [ -t ] [ -V ] [ -x ] [ -z ] [ device [...] | ALL ] [ -p [ device [,...] | ALL ] ] [ interval [ count ] ]
```

### 命令分析
``` shell
-c    仅显示CPU统计信息，与 -d 选项互斥
-d    仅显示磁盘统计信息,与 -c 选项互斥
-n    显示NFS网络文件系统的报告信息(系统内核 >= 2.6.17)
-h    当用-n显示NFS文件系统状态时，使用-h后显示内容更加详细
-N    显示已注册的所有设备映射器名，一般用于查看LVM2的统计情况
-k    以k为单位显示每秒的磁盘请求数，默认单位块
-m    以MB为单位显示数据信息(默认单位为块)
-t    在输出数据时，打印搜集数据的时间
-V    打印版本号和帮助信息
-x    输出扩展信息
-z    忽略所有没有活跃的设备信息
-p device | ALL   与-x选项互斥，用于显示块设备以及系统分区的统计信息，也可以在-p后指定一个设备名，如：iostat -p hda 或者显示所有设备 `iostat -p ALL`
```

### 输出说明
``` shell
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.93    0.00    2.94    0.30    0.00   95.83

Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
sda               5.06        16.24        88.93    6990409   38274624
dm-0              5.11        15.97        88.02    6873828   37884090
dm-1              0.28         0.20         0.90      87716     388424
```

```
%user         在用户级别运行所使用的CPU的百分比.
%nice         nice操作(优先级变化)所使用的CPU的百分比
%system       在系统级别(kernel)运行所使用CPU的百分比
%iowait       CPU等待硬件I/O时,所占用CPU百分比
%steal        虚拟 CPU 等待实际 CPU 的时间的百分比（这个值越低越好）
%idle         CPU空闲时间的百分比
```

```
Blk_read     读入块的当总数.
Blk_wrtn     写入块的总数.
kB_read/s    每秒从驱动器读入的数据量,单位为K.
kB_wrtn/s    每秒向驱动器写入的数据量,单位为K.
kB_read      读入的数据总量,单位为K.
kB_wrtn      写入的数据总量,单位为K.
rrqm/s       将读入请求合并后,每秒发送到设备的读入请求数.
wrqm/s       将写入请求合并后,每秒发送到设备的写入请求数.
r/s          每秒发送到设备的读入请求数.
w/s          每秒发送到设备的写入请求数.
rsec/s       每秒从设备读入的扇区数.
wsec/s       每秒向设备写入的扇区数.
rkB/s        每秒从设备读入的数据量,单位为K.
wkB/s        每秒向设备写入的数据量,单位为K.
avgrq-sz     发送到设备的请求的平均大小,单位是扇区.
avgqu-sz     发送到设备的请求的平均队列长度.队列长度越短越好
await        I/O请求平均执行时间.包括发送请求和执行的时间.单位是毫秒.
svctm        发送到设备的I/O请求的平均执行时间.单位是毫秒.
%util       在I/O请求发送到设备期间,占用CPU时间的百分比.用于显示设备的带宽利用率.当这个值接近100%时,表示设备带宽已经占满
```

### 案例
``` shell
      #  iostat
显示一条统计记录,包括所有的CPU和设备.

      # iostat -d 2
 每隔2秒,显示一次设备统计信息.

      # iostat -d 2 6
 每隔2秒,显示一次设备统计信息.总共输出6次.
      # iostat -x hda hdb 2 6
 每隔2秒显示一次hda,hdb两个设备的扩展统计信息,共输出6次.

      # iostat -p sda 2 6
 每隔2秒显示一次sda及上面所有分区的统计信息,共输出6次.
```

### [参考资料](https://linux.die.net/man/1/iostat)
### [资料](http://www.cnblogs.com/ggjucheng/archive/2013/01/13/2858810.html)
